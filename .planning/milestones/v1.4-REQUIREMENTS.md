# Requirements Archive: v1.4 Smart Song Search & Spotify Foundation

**Archived:** 2026-02-09
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: v1.4 Smart Song Search & Spotify Foundation

## Song Search

- [x] **SEARCH-01**: User can search curated song catalog with typeahead autocomplete (debounced, 2-char minimum)
- [x] **SEARCH-02**: Search results highlight matching characters in song title and artist name
- [x] **SEARCH-03**: Search abstraction supports multiple backends (curated now, Spotify when connected)

## Songs I Run To

- [x] **SONGS-01**: User can add songs to "Songs I Run To" list from search results
- [x] **SONGS-02**: User can view and remove songs from "Songs I Run To" list with empty state guidance
- [x] **SONGS-03**: Running songs receive scoring boost in playlist generation (treated like liked songs)
- [x] **SONGS-04**: Running songs are analyzed for taste patterns (genre/artist preferences fed to TastePatternAnalyzer)
- [x] **SONGS-05**: Running songs show BPM compatibility indicator relative to current cadence target

## Spotify Foundation

- [x] **SPOTIFY-01**: App supports Spotify OAuth PKCE authorization flow with secure token storage
- [x] **SPOTIFY-02**: Token management handles expiry, refresh, and graceful degradation when unavailable
- [x] **SPOTIFY-03**: User can search Spotify catalog when connected, extending local search results with dual-source UI
- [x] **SPOTIFY-04**: User can browse their Spotify playlists when connected
- [x] **SPOTIFY-05**: User can select songs from Spotify playlists to import into "Songs I Run To"

## Future Requirements

(None deferred — all proposed features selected for this milestone)

## Out of Scope

- **Spotify playback integration** — Requires Premium, adds SDK burden; external play links sufficient
- **Spotify playlist export/creation** — Wait for Dashboard access; clipboard copy is interim
- **Spotify "Liked Songs" bulk import** — Too broad; playlist-level import filters naturally
- **Background token refresh** — Over-engineering for foundation; on-demand refresh sufficient
- **Song recommendations from favorites** — Existing quality scorer handles via taste learning

## Traceability

| REQ-ID | Phase | Plan | Status |
|--------|-------|------|--------|
| SEARCH-01 | Phase 30 | 30-01, 30-02 | Delivered |
| SEARCH-02 | Phase 30 | 30-02 | Delivered |
| SEARCH-03 | Phase 30 | 30-01 | Delivered |
| SONGS-01 | Phase 28, 30 | 28-02, 30-02 | Delivered |
| SONGS-02 | Phase 28 | 28-02 | Delivered |
| SONGS-03 | Phase 29 | 29-01 | Delivered |
| SONGS-04 | Phase 29 | 29-01 | Delivered |
| SONGS-05 | Phase 29 | 29-02 | Delivered |
| SPOTIFY-01 | Phase 31 | 31-01, 31-02 | Delivered |
| SPOTIFY-02 | Phase 31 | 31-01, 31-02 | Delivered |
| SPOTIFY-03 | Phase 32 | 32-01 | Delivered |
| SPOTIFY-04 | Phase 33 | 33-01, 33-02 | Delivered |
| SPOTIFY-05 | Phase 33 | 33-01, 33-02 | Delivered |

---
*Created: 2026-02-08*
